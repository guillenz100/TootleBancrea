<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <title>Configurar</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
        <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
        <script src="js/database.js" type="text/javascript"></script>
    </head>
    <body>
        <form >
            <div data-role='content'>
                <label for="txtUsuario">Usuario:</label>
                <input type="text" name="txtUsuario" id="txtUsuario"/>

                <label for="txtPassword">Password:</label>
                <input type="password" name="txtPassword" id="txtPassword"/>
                <a class ="ui-btn" onclick="save();">Guardar</a>
                <a class ="ui-btn" onclick="eliminar();">Eliminar</a>
            </div>
        </form>
         <script type="text/javascript">
             
            $( document ).ready(function() {
                cargaUsuario();
            });

            function cargaUsuario(){
                database.queryEnd(cargaUsuarioOK);
                database.initialize();
            }
             function cargaUsuarioOK(error){
                if (error==null){
                   $("#txtUsuario").val(database.usuario());
                }else{
                    alert("Error al Inicializar "+error);
                }
            }
             
            function eliminar(){
                database.queryEnd(do_eliminar);
                database.initialize();
            }
             function do_eliminar(error){
                if (error==null){
                    database.queryEnd(deleteOK);
                    database.delete();
                }else{
                    alert("Error al Inicializar "+error);
                }
            }
            
            function deleteOK(error){
                if (error==null)
                    alert("Usuario Eliminado");
                else
                    alert("Error al eliminar"+error);    
            }
            
            function save(){
                database.queryEnd(do_save);
                database.initialize();
                
            }
            function do_save(error){
                if (error==null){
                    database.queryEnd(saveOK);
                    database.save($("#txtUsuario").val());
                }else{
                    alert("Error al Inicializar "+error);
                }
            }
            function saveOK(error){
                if (error==null)
                    alert("Usuario Guardado "+database.usuario());
                else
                    alert("Error al guardar:"+error);
                
            }
            
           
        </script>
    </body>
   
</html>
