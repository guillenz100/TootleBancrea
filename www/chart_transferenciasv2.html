<!DOCTYPE html>
<html>
    <head>

        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
        <title>Transferencias</title>
        <script type="text/javascript" src="cordova.js"></script>
        <script src="http://code.jquery.com/jquery-1.10.2.js" type="text/javascript"></script>
        <link href="css/global.css" rel="stylesheet" type="text/css"/>
        <script src="js/utils.js" type="text/javascript"></script>
        <script src="js/chartist.min.js" type="text/javascript"></script>
        <script src="js/loaderspin.js" type="text/javascript"></script>
        <link href="css/chartist.min.css" rel="stylesheet" type="text/css"/>
    </head>
    <body>
        <div class="app fullsize">
            <canvas id="canvasLoader" height="200" width="200" style="background:transparent;z-index: 2;display: none;" class="loader" ></canvas>
            <div id="divObject" class="fullsize">
            </div>
        </div>
        <script>
            
         var GARRLABEL = ["Data"];
         var GARRSERIE1 = [0];
        GSERVERURL+="17";
          var data = {
                labels: GARRLABEL,
                // Our series array that contains series objects or in this case series data arrays
                series: [
                  GARRSERIE1
                ]
              };
        var chart=new Chartist.Line('#divObject', data);

        $( document ).ready(function() {
             callAjax();
          });


        function drawChart(){
            data = {
                labels: GARRLABEL,
                // Our series array that contains series objects or in this case series data arrays
                series: [
                  GARRSERIE1
                ],
               low: 0,
  showArea: true,
  showPoint: false,
  fullWidth: true
              };
            chart= new Chartist.Line('#divObject', data);
        }
        function callAjax() {
            loaderspin.start("canvasLoader");
            $.post(GSERVERURL, { intEmpresa: "1", intConsulta: "37" }, null, "text")
                .done(function(data) {
                    data = parseXML(data);
                    if(data==null)
                        return;
                    GARRLABEL=[];
                    GARRSERIE1=[];
                    $(data).find("Table").each(function() {
                        var objNode = $(this);
                        GARRLABEL.push(objNode.find("strMes").text());
                        GARRSERIE1.push(parseFloat(objNode.find("dblTotal").text()));
                            
                    });
                    loaderspin.stop();
                    drawChart();
                }
            );
        }
            
    
        chart.on('draw', function(data) {
          if(data.type === 'line' || data.type === 'area') {
            data.element.animate({
              d: {
                begin: 2000 * data.index,
                dur: 2000,
                from: data.path.clone().scale(1, 0).translate(0, data.chartRect.height()).stringify(),
                to: data.path.clone().stringify(),
                easing: Chartist.Svg.Easing.easeOutQuint
              }
            });
          }
        });

        </script>
    </body>
</html>
