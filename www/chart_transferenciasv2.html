<!DOCTYPE html>
<html>
    <head>

        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
        <title>Transferencias</title>
        <script type="text/javascript" src="cordova.js"></script>
        <script src="http://code.jquery.com/jquery-1.10.2.js" type="text/javascript"></script>
        <link href="css/global.css" rel="stylesheet" type="text/css"/>
        <script src="js/utils.js" type="text/javascript"></script>
        <script src="js/chartist.min.js" type="text/javascript"></script>
        <script src="js/loaderspin.js" type="text/javascript"></script>
        <link href="css/chartist.min.css" rel="stylesheet" type="text/css"/>
        <style>
        .fullsize {
            animation: pulse 5s;
          }

          @keyframes pulse {
            0% {
              opacity:0;
            }
            100% {
              opacity:100;
            }
          }
    </style>
    </head>
    
    <body>
        <div class="app fullsize">
            <canvas id="canvasLoader" height="200" width="200" style="background:transparent;z-index: 2;display: none;" class="loader" ></canvas>
            <div id="divObject" class="fullsize">
            </div>
        </div>
        <script>
            
         var GARRLABEL = ["Data"];
         var GARRSERIE1 = [0];
        GSERVERURL+="17";
     
        $( document ).ready(function() {
             callAjax();
          });


        function drawChart(){
            var data = {
                labels: GARRLABEL,
                // Our series array that contains series objects or in this case series data arrays
                series: [
                  GARRSERIE1
                ],
                showLabel:true
            };
            new Chartist.Line('#divObject', data);
        }
        function callAjax() {
            loaderspin.start("canvasLoader");
            $.post(GSERVERURL, { intEmpresa: "1", intConsulta: "37" }, null, "text")
                .done(function(data) {
                    data = parseXML(data);
                    if(data==null)
                        return;
                    GARRLABEL=[];
                    GARRSERIE1=[];
                    $(data).find("Table").each(function() {
                        var objNode = $(this);
                        GARRLABEL.push(objNode.find("strMes").text());
                        GARRSERIE1.push(parseFloat(objNode.find("dblTotal").text()));
                            
                    });
                    loaderspin.stop();
                    drawChart();
                }
            );
        }
            
    

        </script>
    </body>
</html>
